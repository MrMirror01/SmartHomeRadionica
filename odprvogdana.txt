import time
import speech_recognition as sr
from transformers import pipeline

model_ime = "joeddav/xlm-roberta-large-xnli"
classifier = pipeline("zero-shot-classification", model=model_ime)

KATEGORIJE = ["Upaliti svijetlo", "Ugasiti svijetlo", "Kolika temperatura"]

while True:
    result = classifier(input(), candidate_labels=KATEGORIJE)
    print(result)

def cuoNesto(recognizer, audio):
    try:
        text = recognizer.recognize_google(audio, language="hr-HR")
        print("Rekao si: " + text)
    except sr.RequestError:
        print("Server ne radi :(")
    except sr.UnknownValueError:
        print("Oprosti, nisam te razumio. Molim te ponovi")

recognizer = sr.Recognizer()
mic = sr.Microphone()

with mic as source:
    recognizer.adjust_for_ambient_noise(source)

listening = recognizer.listen_in_background(mic, cuoNesto)

while True:
    time.sleep(100)
